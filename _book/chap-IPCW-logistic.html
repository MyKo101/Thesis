<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Inverse Probability Weighting Adjustment of the Logistic Regression Calibration-in-the-Large | Multi-State Clinical Prediction Models in Renal Replacement Therapy</title>
  <meta name="description" content="Chapter 5 Inverse Probability Weighting Adjustment of the Logistic Regression Calibration-in-the-Large | Multi-State Clinical Prediction Models in Renal Replacement Therapy" />
  <meta name="generator" content="bookdown 0.17.2 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Inverse Probability Weighting Adjustment of the Logistic Regression Calibration-in-the-Large | Multi-State Clinical Prediction Models in Renal Replacement Therapy" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Inverse Probability Weighting Adjustment of the Logistic Regression Calibration-in-the-Large | Multi-State Clinical Prediction Models in Renal Replacement Therapy" />
  
  
  

<meta name="author" content="Michael Andrew Barrowman" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chap-Conf-CR.html"/>
<link rel="next" href="chap-performance-metrics.html"/>
<script src="libs/header-attrs-2.1.1/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/tabwid-1.0.0/tabwid.css" rel="stylesheet" />
<script src="libs/tabwid-1.0.0/tabwid.js"></script>



</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Page One</a></li>
<li class="chapter" data-level="2" data-path="chap-lit-report.html"><a href="chap-lit-report.html"><i class="fa fa-check"></i><b>2</b> Literature Report</a>
<ul>
<li class="chapter" data-level="2.1" data-path="chap-lit-report.html"><a href="chap-lit-report.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="chap-lit-report.html"><a href="chap-lit-report.html#clinical-prediction-models"><i class="fa fa-check"></i><b>2.2</b> Clinical Prediction Models</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="chap-lit-report.html"><a href="chap-lit-report.html#fundamental-prognosis-research"><i class="fa fa-check"></i><b>2.2.1</b> Fundamental Prognosis Research</a></li>
<li class="chapter" data-level="2.2.2" data-path="chap-lit-report.html"><a href="chap-lit-report.html#prognostic-factor-research"><i class="fa fa-check"></i><b>2.2.2</b> Prognostic Factor Research</a></li>
<li class="chapter" data-level="2.2.3" data-path="chap-lit-report.html"><a href="chap-lit-report.html#prognostic-model-research"><i class="fa fa-check"></i><b>2.2.3</b> Prognostic Model Research</a></li>
<li class="chapter" data-level="2.2.4" data-path="chap-lit-report.html"><a href="chap-lit-report.html#stratified-medicine"><i class="fa fa-check"></i><b>2.2.4</b> Stratified Medicine</a></li>
<li class="chapter" data-level="2.2.5" data-path="chap-lit-report.html"><a href="chap-lit-report.html#examples"><i class="fa fa-check"></i><b>2.2.5</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="chap-lit-report.html"><a href="chap-lit-report.html#competing-risks-multi-state-models"><i class="fa fa-check"></i><b>2.3</b> Competing Risks &amp; Multi-State Models</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chap-scoping-review.html"><a href="chap-scoping-review.html"><i class="fa fa-check"></i><b>3</b> The Application of Multi-State Methods to Develop Clinical Prediction Models Designed for Clinical Use - A Scoping Review</a>
<ul>
<li class="chapter" data-level="3.1" data-path="chap-scoping-review.html"><a href="chap-scoping-review.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="chap-scoping-review.html"><a href="chap-scoping-review.html#methods"><i class="fa fa-check"></i><b>3.2</b> Methods</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="chap-scoping-review.html"><a href="chap-scoping-review.html#scope-of-review"><i class="fa fa-check"></i><b>3.2.1</b> Scope of Review</a></li>
<li class="chapter" data-level="3.2.2" data-path="chap-scoping-review.html"><a href="chap-scoping-review.html#initial-search-strategy"><i class="fa fa-check"></i><b>3.2.2</b> Initial Search Strategy</a></li>
<li class="chapter" data-level="3.2.3" data-path="chap-scoping-review.html"><a href="chap-scoping-review.html#filtering"><i class="fa fa-check"></i><b>3.2.3</b> Filtering</a></li>
<li class="chapter" data-level="3.2.4" data-path="chap-scoping-review.html"><a href="chap-scoping-review.html#data-extraction"><i class="fa fa-check"></i><b>3.2.4</b> Data Extraction</a></li>
<li class="chapter" data-level="3.2.5" data-path="chap-scoping-review.html"><a href="chap-scoping-review.html#reporting"><i class="fa fa-check"></i><b>3.2.5</b> Reporting</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html"><i class="fa fa-check"></i><b>4</b> How unmeasured confounding in a competing risks setting can affect treatment effect estimates in observational studies</a>
<ul>
<li class="chapter" data-level="4.1" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#background"><i class="fa fa-check"></i><b>4.1</b> Background</a></li>
<li class="chapter" data-level="4.2" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#methods-1"><i class="fa fa-check"></i><b>4.2</b> Methods</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html"><i class="fa fa-check"></i><b>5</b> Inverse Probability Weighting Adjustment of the Logistic Regression Calibration-in-the-Large</a>
<ul>
<li class="chapter" data-level="5.1" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#introduction-2"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#methods-2"><i class="fa fa-check"></i><b>5.2</b> Methods</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#theory"><i class="fa fa-check"></i><b>5.2.1</b> Theory</a></li>
<li class="chapter" data-level="5.2.2" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#aims"><i class="fa fa-check"></i><b>5.2.2</b> Aims</a></li>
<li class="chapter" data-level="5.2.3" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#data-generating-method"><i class="fa fa-check"></i><b>5.2.3</b> Data Generating Method</a></li>
<li class="chapter" data-level="5.2.4" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#methods-3"><i class="fa fa-check"></i><b>5.2.4</b> Methods</a></li>
<li class="chapter" data-level="5.2.5" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#estimands"><i class="fa fa-check"></i><b>5.2.5</b> Estimands</a></li>
<li class="chapter" data-level="5.2.6" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#performance-measures"><i class="fa fa-check"></i><b>5.2.6</b> Performance Measures</a></li>
<li class="chapter" data-level="5.2.7" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#software"><i class="fa fa-check"></i><b>5.2.7</b> Software</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#results"><i class="fa fa-check"></i><b>5.3</b> Results</a></li>
<li class="chapter" data-level="5.4" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#discussion"><i class="fa fa-check"></i><b>5.4</b> Discussion</a></li>
<li class="chapter" data-level="5.5" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#references"><i class="fa fa-check"></i><b>5.5</b> References</a></li>
<li class="chapter" data-level="5.6" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#supplementary-material---calibration-slope"><i class="fa fa-check"></i><b>5.6</b> Supplementary Material - Calibration Slope</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#results-1"><i class="fa fa-check"></i><b>5.6.1</b> Results</a></li>
<li class="chapter" data-level="5.6.2" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#discussion-1"><i class="fa fa-check"></i><b>5.6.2</b> Discussion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html"><i class="fa fa-check"></i><b>6</b> Prediction Model Performance Metrics for the Validation of Multi-State Clinical Prediction Models</a>
<ul>
<li class="chapter" data-level="6.1" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#introduction-3"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#motivating-data-set"><i class="fa fa-check"></i><b>6.2</b> Motivating Data Set</a></li>
<li class="chapter" data-level="6.3" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#current-approaches"><i class="fa fa-check"></i><b>6.3</b> Current Approaches</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#baseline-models"><i class="fa fa-check"></i><b>6.3.1</b> Baseline Models</a></li>
<li class="chapter" data-level="6.3.2" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#notation"><i class="fa fa-check"></i><b>6.3.2</b> Notation</a></li>
<li class="chapter" data-level="6.3.3" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#patient-weighting"><i class="fa fa-check"></i><b>6.3.3</b> Patient Weighting</a></li>
<li class="chapter" data-level="6.3.4" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#accuracy---brier-score"><i class="fa fa-check"></i><b>6.3.4</b> Accuracy - Brier Score</a></li>
<li class="chapter" data-level="6.3.5" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#discrimination---c-statistic"><i class="fa fa-check"></i><b>6.3.5</b> Discrimination - c-statistic</a></li>
<li class="chapter" data-level="6.3.6" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#calibration---intercept-and-slope"><i class="fa fa-check"></i><b>6.3.6</b> Calibration - Intercept and Slope</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#extension-to-multi-state-models"><i class="fa fa-check"></i><b>6.4</b> Extension to Multi-State Models</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#trivial-extensions"><i class="fa fa-check"></i><b>6.4.1</b> Trivial Extensions</a></li>
<li class="chapter" data-level="6.4.2" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#accuracy---multiple-outcome-brier-score"><i class="fa fa-check"></i><b>6.4.2</b> Accuracy - Multiple Outcome Brier Score</a></li>
<li class="chapter" data-level="6.4.3" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#discrimination---polytomous-discriminatory-index"><i class="fa fa-check"></i><b>6.4.3</b> Discrimination - Polytomous Discriminatory Index</a></li>
<li class="chapter" data-level="6.4.4" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#calibration---multinomial-intercept-matched-and-unmatched-slopes"><i class="fa fa-check"></i><b>6.4.4</b> Calibration - Multinomial Intercept, Matched and Unmatched Slopes</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#application-to-real-world-data"><i class="fa fa-check"></i><b>6.5</b> Application to Real-World Data</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#accuracy"><i class="fa fa-check"></i><b>6.5.1</b> Accuracy</a></li>
<li class="chapter" data-level="6.5.2" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#discrimination"><i class="fa fa-check"></i><b>6.5.2</b> Discrimination</a></li>
<li class="chapter" data-level="6.5.3" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#calibration"><i class="fa fa-check"></i><b>6.5.3</b> Calibration</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#discussion-2"><i class="fa fa-check"></i><b>6.6</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html"><i class="fa fa-check"></i><b>7</b> Development and External Validation of a Multi-State Clinical Prediction Model for Chronic Kidney Disease Patients Progressing onto Renal Replacement Therapy and Death</a>
<ul>
<li class="chapter" data-level="7.1" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#introduction-4"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#methods-4"><i class="fa fa-check"></i><b>7.2</b> Methods</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#data-sources"><i class="fa fa-check"></i><b>7.2.1</b> Data Sources</a></li>
<li class="chapter" data-level="7.2.2" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#development"><i class="fa fa-check"></i><b>7.2.2</b> Development</a></li>
<li class="chapter" data-level="7.2.3" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#example"><i class="fa fa-check"></i><b>7.2.3</b> Example</a></li>
<li class="chapter" data-level="7.2.4" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#validation"><i class="fa fa-check"></i><b>7.2.4</b> Validation</a></li>
<li class="chapter" data-level="7.2.5" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#calculator"><i class="fa fa-check"></i><b>7.2.5</b> Calculator</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#results-2"><i class="fa fa-check"></i><b>7.3</b> Results</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#data-sources-1"><i class="fa fa-check"></i><b>7.3.1</b> Data Sources</a></li>
<li class="chapter" data-level="7.3.2" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#development-1"><i class="fa fa-check"></i><b>7.3.2</b> Development</a></li>
<li class="chapter" data-level="7.3.3" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#example-1"><i class="fa fa-check"></i><b>7.3.3</b> Example</a></li>
<li class="chapter" data-level="7.3.4" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#validation-1"><i class="fa fa-check"></i><b>7.3.4</b> Validation</a></li>
<li class="chapter" data-level="7.3.5" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#calculator-1"><i class="fa fa-check"></i><b>7.3.5</b> Calculator</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#discussion-3"><i class="fa fa-check"></i><b>7.4</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="chap-mscpm.html"><a href="chap-mscpm.html"><i class="fa fa-check"></i><b>8</b> mscpm Package</a></li>
<li class="chapter" data-level="" data-path="references-1.html"><a href="references-1.html"><i class="fa fa-check"></i>References</a></li>
<li class="chapter" data-level="9" data-path="chap-conclusion.html"><a href="chap-conclusion.html"><i class="fa fa-check"></i><b>9</b> Conclusion</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Multi-State Clinical Prediction Models in Renal Replacement Therapy</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chap-IPCW-logistic" class="section level1" number="5">
<h1><span class="header-section-number">Chapter 5</span> Inverse Probability Weighting Adjustment of the Logistic Regression Calibration-in-the-Large</h1>
<div id="introduction-2" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Introduction</h2>
<p>Clinical prediction models (CPMs) need to be validated before they are used. A fundamental test of their validity is calibration: the agreement between observed and predicted outcomes. This requires that among individuals with p% risk of an event, p% of those have the event <span class="citation">[13]</span>. The simplest assessment of calibration is the calibration-in-the-large, which tests for agreement in mean calibration (the weakest form of calibration) <span class="citation">[14]</span>. With continuous or binary outcomes, such a test is straight-forward: it can be translated to a test for a zero intercept in a regression model with an appropriately transformed linear predictor as an offset, and no other predictors.</p>
<p>In the case of Cox regression, however, estimation of calibration is complicated in three ways. First, calibration can be computed at multiple time-points and one must decide which time-points to evaluate, and how to integrate over these time-points. Second, there exists no explicit intercept in the model because of the non-parametric baseline hazard function <span class="citation">[15]</span>. Third, censoring needs to be handled in an appropriate way. The choice and combination of time-points determines what we mean by calibration; this is problem-specific and not the focus of this paper. Calibration can also be looked at integrated over time using martingale residuals<span class="citation">[16]</span>; however here we focus on the case where calibration at a specific time point is of interest - e.g. as is common in clinical decision support. The lack of intercept can be overcome provided sufficient information concerning the baseline survival curve is available (although this is rarely the case <span class="citation">[17]</span>). Once this is established, estimated survival probabilities are available. Censoring leads to problems in determining observed survival. This is commonly overcome by using Kaplan-Meier estimates <span class="citation">[15], [18]</span>. However, the censoring assumptions required for the Kaplan-Meier estimate are stronger than those required for the Cox model: the former requiring unconditional independence (random censoring), the latter requiring independence conditional on covariates only. This is a problem because when miscalibration is found using this approach, it is not clear whether this is genuine miscalibration or a consequence of the different censoring assumptions.</p>
<p>Royston <span class="citation">[19]</span> presents an alternative approach for calibration at external validation. He uses the approach of pseudo-observations, as described by Perme and Anderson <span class="citation">[20]</span> to overcome the censoring issue and produce observed probabilities at individual level; however, this assumes that censoring is independent of covariates. In this paper and another <span class="citation">[21]</span> he proposes the comparison of KM curves in risk groups, which alleviates the strength of the independence assumption required for the censoring handling to be comparable between the Cox model and the KM curves (since the KM curves now only assume independent censoring within risk group). In these papers a fractional polynomial approach to estimating the baseline survival function (and thus being able to share it efficiently) is also provided.</p>
<p>QRISK used the overall KM approach in the 2007 paper <span class="citation">[18]</span> with good results (6.34% predicted vs 6.25% observed in women and 8.86% predicted vs 8.88% observed in men), but bad results in the QRISK3 update <span class="citation">[2]</span> (4.7% predicted v 5.8% observed in women and 6.4% predicted vs 7.5% observed in men ). This may be because, as follow-up extends, the dependence of censoring on the covariates increases (QRISK had 12 years follow-up, QRISK3 18 years) and an important change between the update was the lower age limit moved from 35 to 25.</p>
<p>A solution to this problem is to apply a weighting to uncensored patients based on their probability of being censored according to a model that accounts for covariates. The Inverse Probability of Censoring Weighting (IPCW) relaxes the assumption that patients who were censored are identical to those that remain at risk. The weighting inflates the patients who were similar to the censored population to account for those patients who are no longer available at a given time.</p>
<p>Gerds &amp; Schumacher <span class="citation">[22]</span> have thoroughly investigated the requirements and advantages of applying an IPCW to a performance measure for modelling using the Brier score as an example and demonstrating the efficacy of its use, which was augmented by Spitoni et al <span class="citation">[23]</span> who demonstrated that any proper scoring rule can be improved by the use of the IPCW. This work has been added to by Han et al <span class="citation">[24]</span> and Liu et al <span class="citation">[25]</span> who demonstrated that the c-statistic is also suitable.
In this paper we present an approach to assessing the calibration intercept (calibration-in-the-large) and calibration slope in time-to-event models based on estimating the censoring distribution, and reweighting observations by the inverse of the censoring probability. We first show, theoretically, how this method can be used and evidence that the metrics for calibration are amenable to its use. We then compare simulation results from using this weighted estimate to an unweighted estimate within various commonly used methods of calibration assessment.</p>
</div>
<div id="methods-2" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Methods</h2>
<div id="theory" class="section level3" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Theory</h3>
<p>[<strong>Lots of Theory work on the probabilities involved from Matt</strong>]</p>
</div>
<div id="aims" class="section level3" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Aims</h3>
<p>The aim of this study is to formalise the bias induced by applying different methods of assessing model calibration to data that is susceptible to censoring and to compare it to the bias when this data has been adjusted by the Inverse Probability of Censoring Weighting (IPCW).</p>
</div>
<div id="data-generating-method" class="section level3" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Data Generating Method</h3>
<p>We simulated populations of patients with survival and censoring times, and took the observed event time as the minimum of these two values along with an event indicator of whether this was the survival or censoring time <span class="citation">[26]</span>. Each population was simulated with two parameters: <span class="math inline">\(\beta\)</span>, <span class="math inline">\(\gamma\)</span> and <span class="math inline">\(\eta\)</span>, which defined the proportional hazards coefficients for the survival and censoring distributions and the baseline hazard function, respectively.</p>
<p>We varied the parameters to take all the values,<span class="math inline">\(\gamma = \{-2,-1.5,-1,-0.5,0,0.5,1,1.5,2\}\)</span>, <span class="math inline">\(\beta = \{-2,-1.5,-1,-0.5,0.5,1,1.5,2\}\)</span> and <span class="math inline">\(\eta = \{-\;^{1}/_{2},0,\;^{1}/_{2}\}\)</span>, that is the proportional hazard coefficients took the same values between -2 and 2, but <span class="math inline">\(\beta\)</span> did not take the value of 0 because this would make a predictive model infeasible.</p>
<p>For each combination of parameters, we generated <span class="math inline">\(N = 100\)</span> populations of <span class="math inline">\(n = 10,000\)</span> patients (a high number of patients was chosen to avoid bias due to a small population size) with a single covariate <span class="math inline">\(Z \sim N(0,1)\)</span>. For each patient, we then generated a survival time, <span class="math inline">\(T\)</span> and a censoring time, <span class="math inline">\(C\)</span>. Survival times were simulated with a baseline hazard <span class="math inline">\(\lambda_0(t) = t^{\eta}\)</span>, and a proportional hazard of <span class="math inline">\(e^{\beta Z}\)</span>. This allows the simulation of a constant baseline hazard (<span class="math inline">\(\eta = 0\)</span>) as well as an increasing (<span class="math inline">\(\eta = \;^{1}/_{2}\)</span>) and decreasing hazard function Censoring times were simulated with a constant baseline hazard, <span class="math inline">\(\lambda_{C,0}(t) = 1\)</span> and a proportional hazard of <span class="math inline">\(e^{\gamma Z}\)</span>.</p>
<p>Once the survival and censoring times were generated, the event time, <span class="math inline">\(X = \min(T,C)\)</span>, and the event indicator, <span class="math inline">\(\delta = I(T=X)\)</span>, were generated. In the real-world, only <span class="math inline">\(Z\)</span>, <span class="math inline">\(X\)</span> and <span class="math inline">\(\delta\)</span> would be observed.</p>
<p>For each population, a prediction model for survival, <span class="math inline">\(F_P\)</span> was chosen to be identical to the Data Generating Mechanism (DGM) to emulate a perfectly calibrated model:</p>
<p><span class="math display">\[
\begin{array}{c}
F_P(t|Z = z) = 1 - \exp\left(-\frac{e^{\beta Z}t^{\eta+1}}{\eta+1}\right)
\end{array}
\]</span>
This prediction model was used to generate an estimate of the Expected probability that a given patient, with covariate <span class="math inline">\(z\)</span>, will have an event at the given time. To test the ability of approaches to detect miscalibration, we also derived a prediction model that would systematically over-estimate the prediction model, <span class="math inline">\(F_O\)</span> and one which would systematically under-estimate the prediction, <span class="math inline">\(F_U\)</span>. These are defined as such:</p>
<p><span class="math display">\[
\begin{array}{rl}
F_U(t|Z=z) =&amp; \textrm{logit}^{-1}\left(\textrm{logit}\left( F_P(t|z) - 0.2\right)\right)
\end{array}
\]</span>
<span class="math display">\[
\begin{array}{rl}
F_O(t|Z=z) =&amp; \textrm{logit}^{-1}\left(\textrm{logit}\left( F_P(t|z) + 0.2\right)\right)
\end{array}
\]</span></p>
<p>The prediction models were assessed at 100 time points, evenly distributed between the 25th and 75th percentile of observed event times, <span class="math inline">\(X\)</span>. At each time point, <span class="math inline">\(t\)</span>, we removed patients who had been censored (i.e. <span class="math inline">\(T &lt; X_i\)</span> &amp; <span class="math inline">\(\delta_i = 0\)</span>)
and created an indicator variable for whether each patient had had the event yet or not:</p>
<p><span class="math display">\[
\begin{array}{c}
O_i = I(X_i &lt; t\;\&amp;\; \delta_i = 1)
\end{array}
\]</span></p>
<p>Similarly, we calculate a censoring prediction model, <span class="math inline">\(G\)</span>, to be identical to the DGM:</p>
<p><span class="math display">\[
\begin{array}{c}
G(t|z) = 1-\exp\left(-e^{\gamma Z}t\right)
\end{array}
\]</span>
This is used to calculate an IPCW for all non-censored patients at the last time they were observed (<span class="math inline">\(t\)</span> for patients who have not had an event, and <span class="math inline">\(X_i\)</span> for patients who have had the event), This is defined as:</p>
<p><span class="math display">\[
\begin{array}{c}
\omega(t|z) = \frac{1}{1 - G(\min(t,X_i)|z)}
\end{array}
\]</span></p>
</div>
<div id="methods-3" class="section level3" number="5.2.4">
<h3><span class="header-section-number">5.2.4</span> Methods</h3>
<p>At each of these time points, we compare Observed outcomes (<span class="math inline">\(O\)</span>) with the Expected outcomes (<span class="math inline">\(E\)</span>) of the prediction models based on four choices of methodology <span class="citation">[6], [19], [21], [27]</span> to produce measures for the calibration-in-the-large</p>
<ul>
<li>Kaplan-Meier (KM) - A Kaplan-Meier estimate of survival is estimated from the data and the value of the KM curve at the current time is taken to be the average Observed number of events within the population and this is compared with the average Expected value.</li>
<li>Logistic Unweighted (LU) - Logistic regression is performed on the non-censored population to predict the binary Observed value using the logit(Expected) value as an offset and the Intercept of the regression is the estimate.</li>
<li>Logistic Weighted (LW) - As above, but the logistic regression is performed using the IPCW as a weighting for each non-censored patient.</li>
<li>Pseudo-Observations (PO) - The contribution of each patient (including censored patients) to the overall Observed is calculated by removing them from the population and aggregating the difference. Logistic regression is performed using the log cumulative hazard as an offset and the Intercept of the result is the estimate.</li>
</ul>
<p>The weights within the LW method create a non-integer number of events within the regression and the PO method can produce values that are not always 0 or 1 (as would be expected in an ordinary logistic regression). The values produced by PO will have to be artificially capped between 0 and 1, but otherwise these two methods do not cause any issues.</p>
</div>
<div id="estimands" class="section level3" number="5.2.5">
<h3><span class="header-section-number">5.2.5</span> Estimands</h3>
<p>For each set of parameters and methodology, our estimand at time, <span class="math inline">\(t\)</span>, measured in simulation <span class="math inline">\(i = 1,...,N\)</span> is <span class="math inline">\(\theta_i(t)\)</span>, the set of estimates of the calibration-in-the-large for the <span class="math inline">\(F_P\)</span>, <span class="math inline">\(F_U\)</span> and <span class="math inline">\(F_O\)</span> models in order. Therefore our underlying truth for all time points is</p>
<p><span class="math display">\[\begin{array}{c}
\theta = \left(0,0.1,-0.1\right)
\end{array}\]</span></p>
<p>From this, we can also define our upper and lower bound for a 95% confidence interval as the vectors <span class="math inline">\(\theta_{i,L}(t)\)</span> and <span class="math inline">\(\theta_{i,U}(t)\)</span>.</p>
</div>
<div id="performance-measures" class="section level3" number="5.2.6">
<h3><span class="header-section-number">5.2.6</span> Performance Measures</h3>
<p>The measures we will take as performance measures as the Bias, the Empirical Standard Error as the Coverage at time, <span class="math inline">\(t\)</span>, along with relevant standard errors and confidence intervals as per current recommendations <span class="citation">[28]</span>. These measures can be seen in table <a href="chap-IPCW-logistic.html#tab:PM-DGM-time">5.1</a>.</p>
<div class="tabwid"><table style='border-collapse:collapse;'><thead><tr style="overflow-wrap:break-word;"><td style="width:113px;background-clip: padding-box;background-color:rgba(100, 149, 237, 1.00);vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2px;padding-top:2px;padding-left:2px;padding-right:2px;background-color:transparent;"><span style="font-family:'Garamond';font-size:11px;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(255, 255, 255, 1.00);background-color:transparent;">Performance Measure</span></p></td><td style="width:170px;background-clip: padding-box;background-color:rgba(100, 149, 237, 1.00);vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2px;padding-top:2px;padding-left:2px;padding-right:2px;background-color:transparent;"><span style="font-family:'Garamond';font-size:11px;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(255, 255, 255, 1.00);background-color:transparent;">Estimation</span></p></td><td style="width:170px;background-clip: padding-box;background-color:rgba(100, 149, 237, 1.00);vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2px;padding-top:2px;padding-left:2px;padding-right:2px;background-color:transparent;"><span style="font-family:'Garamond';font-size:11px;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(255, 255, 255, 1.00);background-color:transparent;">SE</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td style="width:113px;background-clip: padding-box;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;background-color:transparent;"><span style="font-family:'Garamond';font-size:8px;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(17, 17, 17, 1.00);background-color:transparent;">Bias</span></p></td><td style="width:170px;background-clip: padding-box;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;background-color:transparent;"><span style="font-family:'Garamond';font-size:8px;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(17, 17, 17, 1.00);background-color:transparent;">$$\hat{\theta}(t) = \frac{1}{N}\sum_{i=1}^N\theta_i(t)-\theta$$</span></p></td><td style="width:170px;background-clip: padding-box;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;background-color:transparent;"><span style="font-family:'Garamond';font-size:8px;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(17, 17, 17, 1.00);background-color:transparent;">$$\hat{\theta}_{SE}(t) = \sqrt{\frac{1}{N(N-1)}\sum_{i=1}^N\left(\theta_i(t) - \hat{\theta}(t)\right)^2}$$</span></p></td></tr><tr style="overflow-wrap:break-word;"><td style="width:113px;background-color:transparent;vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;background-color:transparent;"><span style="font-family:'Garamond';font-size:8px;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(17, 17, 17, 1.00);background-color:transparent;">EmpSE</span></p></td><td style="width:170px;background-color:transparent;vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;background-color:transparent;"><span style="font-family:'Garamond';font-size:8px;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(17, 17, 17, 1.00);background-color:transparent;">$$\hat{E}(t) = \sqrt{\frac{1}{N-1}\sum_{i=1}^N\left(\theta_i(t) - \hat{\theta}\right)^2}$$</span></p></td><td style="width:170px;background-color:transparent;vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;background-color:transparent;"><span style="font-family:'Garamond';font-size:8px;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(17, 17, 17, 1.00);background-color:transparent;">$$\hat{E}_{SE}(t) = \frac{\hat{E}(t)}{\sqrt{2(N-1)}}$$</span></p></td></tr><tr style="overflow-wrap:break-word;"><td style="width:113px;background-clip: padding-box;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;background-color:transparent;"><span style="font-family:'Garamond';font-size:8px;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(17, 17, 17, 1.00);background-color:transparent;">Coverage</span></p></td><td style="width:170px;background-clip: padding-box;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;background-color:transparent;"><span style="font-family:'Garamond';font-size:8px;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(17, 17, 17, 1.00);background-color:transparent;">$$\hat{C}(t)=\frac{1}{N}\sum_{i=1}^NI\left(\theta_{i,L}(t) \le \theta\le\theta_{i,U}(t)\right)$$</span></p></td><td style="width:170px;background-clip: padding-box;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;background-color:transparent;"><span style="font-family:'Garamond';font-size:8px;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(17, 17, 17, 1.00);background-color:transparent;">$$\hat{C}_{SE}(t) = \frac{\hat{C}(t)(1-\hat{C}(t))}{N}$$</span></p></td></tr></tbody></table></div>
<caption>
<span id="tab:PM-DGM-time">Table 5.1: </span> Description of the Performance Measures defined at time <span class="math inline">\(t\)</span>
</caption>
<p>For each estimand above, <span class="math inline">\(\hat{Q}(t) = \{\hat{\theta}(t),\hat{E}(t), \hat{C}(t)\}\)</span> and associated SE, <span class="math inline">\(\hat{Q}_\textrm{SE}(t) = \{\hat{\theta}_\textrm{SE}(t),\hat{E}_\textrm{SE}(t), \hat{C}_\textrm{SE}(t)\}\)</span>, we average over time. As these measures will be taken at each of the 100 time points, <span class="math inline">\(t_j:j=1...100\)</span>, we summarise each of these measures as an average and as weighted average, as seen in table <a href="chap-IPCW-logistic.html#tab:PM-DGM">5.2</a>. The weight used for the measure at time <span class="math inline">\(t_j\)</span> is the average number of non-censored patients remaining in the population at time <span class="math inline">\(t_j\)</span>, defined as <span class="math inline">\(n_j\)</span> (note that this includes patients who have had the event).</p>
<div class="tabwid"><table style='border-collapse:collapse;'><thead><tr style="overflow-wrap:break-word;"><td style="width:113px;background-clip: padding-box;background-color:rgba(100, 149, 237, 1.00);vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2px;padding-top:2px;padding-left:2px;padding-right:2px;background-color:transparent;"><span style="font-family:'Garamond';font-size:11px;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(255, 255, 255, 1.00);background-color:transparent;"></span></p></td><td style="width:170px;background-clip: padding-box;background-color:rgba(100, 149, 237, 1.00);vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2px;padding-top:2px;padding-left:2px;padding-right:2px;background-color:transparent;"><span style="font-family:'Garamond';font-size:11px;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(255, 255, 255, 1.00);background-color:transparent;">Estimand</span></p></td><td style="width:170px;background-clip: padding-box;background-color:rgba(100, 149, 237, 1.00);vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:2px;padding-top:2px;padding-left:2px;padding-right:2px;background-color:transparent;"><span style="font-family:'Garamond';font-size:11px;font-weight:bold;font-style:normal;text-decoration:none;color:rgba(255, 255, 255, 1.00);background-color:transparent;">SE</span></p></td></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td style="width:113px;background-clip: padding-box;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;background-color:transparent;"><span style="font-family:'Garamond';font-size:8px;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(17, 17, 17, 1.00);background-color:transparent;">Unweighted</span></p></td><td style="width:170px;background-clip: padding-box;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;background-color:transparent;"><span style="font-family:'Garamond';font-size:8px;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(17, 17, 17, 1.00);background-color:transparent;">$$\bar{Q}=\frac{1}{100}\sum_{j=1}^{100}\hat{Q}(t_j)$$</span></p></td><td style="width:170px;background-clip: padding-box;background-color:rgba(239, 239, 239, 1.00);vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;background-color:transparent;"><span style="font-family:'Garamond';font-size:8px;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(17, 17, 17, 1.00);background-color:transparent;">$$\bar{Q}_{SE}=\sqrt{\frac{1}{100}\sum_{j=1}^{100}\hat{Q}_{SE}(t_j)^2}$$</span></p></td></tr><tr style="overflow-wrap:break-word;"><td style="width:113px;background-color:transparent;vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;background-color:transparent;"><span style="font-family:'Garamond';font-size:8px;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(17, 17, 17, 1.00);background-color:transparent;">Weighted</span></p></td><td style="width:170px;background-color:transparent;vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;background-color:transparent;"><span style="font-family:'Garamond';font-size:8px;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(17, 17, 17, 1.00);background-color:transparent;">$$\bar{Q}'=\frac{\sum_{j=1}^{100}n_j\hat{Q}(t_j)}{\sum_{j=1}^{100}n_j}$$</span></p></td><td style="width:170px;background-color:transparent;vertical-align: middle;border-bottom: 0.50px solid rgba(0, 0, 0, 1.00);border-top: 0.50px solid rgba(0, 0, 0, 1.00);border-left: 0.50px solid rgba(0, 0, 0, 1.00);border-right: 0.50px solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;"><p style="margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:0;padding-top:0;padding-left:0;padding-right:0;background-color:transparent;"><span style="font-family:'Garamond';font-size:8px;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(17, 17, 17, 1.00);background-color:transparent;">$$\bar{Q}_{SE}^'=\sqrt{\frac{\sum_{j=1}^{100}n_j\hat{Q}_{SE}(t_j)^2}{\sum_{j=1}^{100}n_j}}$$</span></p></td></tr></tbody></table></div>
<caption>
<span id="tab:PM-DGM">Table 5.2: </span> Description of how Performance Measures are averaged over time
</caption>
</div>
<div id="software" class="section level3" number="5.2.7">
<h3><span class="header-section-number">5.2.7</span> Software</h3>
<p>All analysis was done in <code>R 3.6.3</code> <span class="citation">[29]</span> using the various <code>tidyverse</code> packages <span class="citation">[30]</span>, Kaplan-Meier estimates were found using the <code>survival</code> package <span class="citation">[31]</span>, Pseudo-Observations were evaluated with the <code>pseudo</code> package <span class="citation">[32]</span>.</p>
</div>
</div>
<div id="results" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Results</h2>
<p>Forthcoming</p>
</div>
<div id="discussion" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Discussion</h2>
<p>Weighting = Good.</p>
<p>Not Weighting = Bad.</p>
</div>
<div id="references" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> References</h2>
</div>
<div id="supplementary-material---calibration-slope" class="section level2" number="5.6">
<h2><span class="header-section-number">5.6</span> Supplementary Material - Calibration Slope</h2>
<p>The main purpose of this paper was to assess the evaluation of calibration-in-the-large at different time points in a time-to-event clinical prediction model. Along with calibration-in-the-large, various methods of calibration can also produce measures of calibration slope. Calibration slope provides an insight into how well the model predicts outcomes across the range of predictions. In an ideal model, the calibration slope would be 1. The Logistic Weighted, Logistic Unweighted and Pseudo-Observation methods described above can provide estimates of the calibration slope. For each of these methods, we first estimate the calibration-in-the-large as above, using a predictor as an offset, then we use this estimate as an offset to predict the calibration slope (without an intercept term).</p>
<div id="results-1" class="section level3" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> Results</h3>
<p>blah blah</p>
</div>
<div id="discussion-1" class="section level3" number="5.6.2">
<h3><span class="header-section-number">5.6.2</span> Discussion</h3>
<p>Brief discussion, much briefer than the main points.</p>

</div>
</div>
</div>
<div id="disqus_thread"></div>
<script>
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = '//myko101.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the
<a href="https://disqus.com/?ref_noscript">
  comments powered by Disqus.</a></noscript>
            </section>

          </div>
        </div>
      </div>
<a href="chap-Conf-CR.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chap-performance-metrics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["thesis.pdf", "PDF"], ["thesis.epub", "EPUB"], ["thesis.docx", "Word"]],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
