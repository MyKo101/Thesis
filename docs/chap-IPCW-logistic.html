<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Using Inverse-Probability-of-Censoring-Weights to Estimate Calibration-in-the-Large for Time-to-Event Models | Multi-State Clinical Prediction Models in Renal Replacement Therapy</title>
  <meta name="description" content="Chapter 3 Using Inverse-Probability-of-Censoring-Weights to Estimate Calibration-in-the-Large for Time-to-Event Models | Multi-State Clinical Prediction Models in Renal Replacement Therapy" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Using Inverse-Probability-of-Censoring-Weights to Estimate Calibration-in-the-Large for Time-to-Event Models | Multi-State Clinical Prediction Models in Renal Replacement Therapy" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Using Inverse-Probability-of-Censoring-Weights to Estimate Calibration-in-the-Large for Time-to-Event Models | Multi-State Clinical Prediction Models in Renal Replacement Therapy" />
  
  
  

<meta name="author" content="Michael Andrew Barrowman" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="chap-Conf-CR.html"/>
<link rel="next" href="chap-performance-metrics.html"/>
<style type="text/css">
p.abstract{
  text-align: center;
  font-weight: bold;
}
div.abstract{
  margin: auto;
  width: 90%;
}
</style>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />



</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#abstract"><i class="fa fa-check"></i>Abstract</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="chap-lit-report.html"><a href="chap-lit-report.html"><i class="fa fa-check"></i><b>1</b> Literature Report</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a></li>
<li class="chapter" data-level="1.2" data-path="chap-lit-report.html"><a href="chap-lit-report.html#clinical-prediction-models"><i class="fa fa-check"></i><b>1.2</b> Clinical Prediction Models</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="chap-lit-report.html"><a href="chap-lit-report.html#fundamental-prognosis-research"><i class="fa fa-check"></i><b>1.2.1</b> Fundamental Prognosis Research</a></li>
<li class="chapter" data-level="1.2.2" data-path="chap-lit-report.html"><a href="chap-lit-report.html#prognostic-factor-research"><i class="fa fa-check"></i><b>1.2.2</b> Prognostic Factor Research</a></li>
<li class="chapter" data-level="1.2.3" data-path="chap-lit-report.html"><a href="chap-lit-report.html#prognostic-model-research"><i class="fa fa-check"></i><b>1.2.3</b> Prognostic Model Research</a></li>
<li class="chapter" data-level="1.2.4" data-path="chap-lit-report.html"><a href="chap-lit-report.html#stratified-medicine"><i class="fa fa-check"></i><b>1.2.4</b> Stratified Medicine</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="chap-lit-report.html"><a href="chap-lit-report.html#competing-risks-multi-state-models"><i class="fa fa-check"></i><b>1.3</b> Competing Risks &amp; Multi-State Models</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="chap-lit-report.html"><a href="chap-lit-report.html#traditional-survival-analysis"><i class="fa fa-check"></i><b>1.3.1</b> Traditional Survival Analysis</a></li>
<li class="chapter" data-level="1.3.2" data-path="chap-lit-report.html"><a href="chap-lit-report.html#competing-risks"><i class="fa fa-check"></i><b>1.3.2</b> Competing Risks</a></li>
<li class="chapter" data-level="1.3.3" data-path="chap-lit-report.html"><a href="chap-lit-report.html#multi-state-models"><i class="fa fa-check"></i><b>1.3.3</b> Multi-State Models</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="chap-lit-report.html"><a href="chap-lit-report.html#chronic-kidney-disease"><i class="fa fa-check"></i><b>1.4</b> Chronic Kidney Disease</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="chap-lit-report.html"><a href="chap-lit-report.html#clinical-prediction-models-1"><i class="fa fa-check"></i><b>1.4.1</b> Clinical Prediction Models</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html"><i class="fa fa-check"></i><b>2</b> How unmeasured confounding in a competing risks setting can affect treatment effect estimates in observational studies</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#abstract"><i class="fa fa-check"></i>Abstract</a>
<ul>
<li class="chapter" data-level="" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#background"><i class="fa fa-check"></i>Background</a></li>
<li class="chapter" data-level="" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#methods"><i class="fa fa-check"></i>Methods</a></li>
<li class="chapter" data-level="" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#results"><i class="fa fa-check"></i>Results</a></li>
<li class="chapter" data-level="" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#conclusion"><i class="fa fa-check"></i>Conclusion</a></li>
<li class="chapter" data-level="" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#supplementary-material"><i class="fa fa-check"></i>Supplementary Material</a></li>
</ul></li>
<li class="chapter" data-level="2.1" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#background-1"><i class="fa fa-check"></i><b>2.1</b> Background</a></li>
<li class="chapter" data-level="2.2" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#methods-1"><i class="fa fa-check"></i><b>2.2</b> Methods</a></li>
<li class="chapter" data-level="2.3" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#results-1"><i class="fa fa-check"></i><b>2.3</b> Results</a></li>
<li class="chapter" data-level="2.4" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#discussion"><i class="fa fa-check"></i><b>2.4</b> Discussion</a></li>
<li class="chapter" data-level="2.5" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#conclusion-1"><i class="fa fa-check"></i><b>2.5</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html"><i class="fa fa-check"></i><b>3</b> Using Inverse-Probability-of-Censoring-Weights to Estimate Calibration-in-the-Large for Time-to-Event Models</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#abstract"><i class="fa fa-check"></i>Abstract</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#methods"><i class="fa fa-check"></i>Methods</a></li>
<li class="chapter" data-level="" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#results"><i class="fa fa-check"></i>Results</a></li>
<li class="chapter" data-level="" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#discussion"><i class="fa fa-check"></i>Discussion</a></li>
<li class="chapter" data-level="" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#supplementary-material"><i class="fa fa-check"></i>Supplementary Material</a></li>
</ul></li>
<li class="chapter" data-level="3.1" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#methods-1"><i class="fa fa-check"></i><b>3.2</b> Methods</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#aims"><i class="fa fa-check"></i><b>3.2.1</b> Aims</a></li>
<li class="chapter" data-level="3.2.2" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#data-generating-method"><i class="fa fa-check"></i><b>3.2.2</b> Data Generating Method</a></li>
<li class="chapter" data-level="3.2.3" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#prediction-models"><i class="fa fa-check"></i><b>3.2.3</b> Prediction Models</a></li>
<li class="chapter" data-level="3.2.4" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#the-ipcw"><i class="fa fa-check"></i><b>3.2.4</b> The IPCW</a></li>
<li class="chapter" data-level="3.2.5" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#calibration-measurements"><i class="fa fa-check"></i><b>3.2.5</b> Calibration Measurements</a></li>
<li class="chapter" data-level="3.2.6" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#estimands"><i class="fa fa-check"></i><b>3.2.6</b> Estimands</a></li>
<li class="chapter" data-level="3.2.7" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#performance-measures"><i class="fa fa-check"></i><b>3.2.7</b> Performance Measures</a></li>
<li class="chapter" data-level="3.2.8" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#software"><i class="fa fa-check"></i><b>3.2.8</b> Software</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#results-1"><i class="fa fa-check"></i><b>3.3</b> Results</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#no-correlation"><i class="fa fa-check"></i><b>3.3.1</b> No correlation</a></li>
<li class="chapter" data-level="3.3.2" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#positive-correlation"><i class="fa fa-check"></i><b>3.3.2</b> Positive correlation</a></li>
<li class="chapter" data-level="3.3.3" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#negative-correlation"><i class="fa fa-check"></i><b>3.3.3</b> Negative correlation</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="chap-IPCW-logistic.html"><a href="chap-IPCW-logistic.html#discussion-1"><i class="fa fa-check"></i><b>3.4</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html"><i class="fa fa-check"></i><b>4</b> Prediction Model Performance Metrics for the Validation of Multi-State Clinical Prediction Models</a>
<ul>
<li class="chapter" data-level="4.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#motivating-data-set"><i class="fa fa-check"></i><b>4.2</b> Motivating Data Set</a></li>
<li class="chapter" data-level="4.3" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#current-approaches"><i class="fa fa-check"></i><b>4.3</b> Current Approaches</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#baseline-models"><i class="fa fa-check"></i><b>4.3.1</b> Baseline Models</a></li>
<li class="chapter" data-level="4.3.2" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#notation"><i class="fa fa-check"></i><b>4.3.2</b> Notation</a></li>
<li class="chapter" data-level="4.3.3" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#patient-weighting"><i class="fa fa-check"></i><b>4.3.3</b> Patient Weighting</a></li>
<li class="chapter" data-level="4.3.4" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#accuracy---brier-score"><i class="fa fa-check"></i><b>4.3.4</b> Accuracy - Brier Score</a></li>
<li class="chapter" data-level="4.3.5" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#discrimination---c-statistic"><i class="fa fa-check"></i><b>4.3.5</b> Discrimination - c-statistic</a></li>
<li class="chapter" data-level="4.3.6" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#calibration---intercept-and-slope"><i class="fa fa-check"></i><b>4.3.6</b> Calibration - Intercept and Slope</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#extension-to-multi-state-models"><i class="fa fa-check"></i><b>4.4</b> Extension to Multi-State Models</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#trivial-extensions"><i class="fa fa-check"></i><b>4.4.1</b> Trivial Extensions</a></li>
<li class="chapter" data-level="4.4.2" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#accuracy---multiple-outcome-brier-score"><i class="fa fa-check"></i><b>4.4.2</b> Accuracy - Multiple Outcome Brier Score</a></li>
<li class="chapter" data-level="4.4.3" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#discrimination---polytomous-discriminatory-index"><i class="fa fa-check"></i><b>4.4.3</b> Discrimination - Polytomous Discriminatory Index</a></li>
<li class="chapter" data-level="4.4.4" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#calibration---multinomial-intercept-matched-and-unmatched-slopes"><i class="fa fa-check"></i><b>4.4.4</b> Calibration - Multinomial Intercept, Matched and Unmatched Slopes</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#application-to-real-world-data"><i class="fa fa-check"></i><b>4.5</b> Application to Real-World Data</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#accuracy"><i class="fa fa-check"></i><b>4.5.1</b> Accuracy</a></li>
<li class="chapter" data-level="4.5.2" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#discrimination"><i class="fa fa-check"></i><b>4.5.2</b> Discrimination</a></li>
<li class="chapter" data-level="4.5.3" data-path="chap-performance-metrics.html"><a href="chap-performance-metrics.html#calibration"><i class="fa fa-check"></i><b>4.5.3</b> Calibration</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#discussion"><i class="fa fa-check"></i><b>4.6</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html"><i class="fa fa-check"></i><b>5</b> Development and External Validation of a Multi-State Clinical Prediction Model for Chronic Kidney Disease Patients Progressing onto Renal Replacement Therapy and Death</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#abstract"><i class="fa fa-check"></i>Abstract</a>
<ul>
<li class="chapter" data-level="" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#objectives"><i class="fa fa-check"></i>Objectives</a></li>
<li class="chapter" data-level="" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#background"><i class="fa fa-check"></i>Background</a></li>
<li class="chapter" data-level="" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#objective"><i class="fa fa-check"></i>Objective</a></li>
<li class="chapter" data-level="" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#methods"><i class="fa fa-check"></i>Methods</a></li>
<li class="chapter" data-level="" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#results"><i class="fa fa-check"></i>Results</a></li>
<li class="chapter" data-level="" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#discusssion"><i class="fa fa-check"></i>Discusssion</a></li>
<li class="chapter" data-level="" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#supplementary-material"><i class="fa fa-check"></i>Supplementary Material</a></li>
</ul></li>
<li class="chapter" data-level="5.1" data-path="index.html"><a href="index.html#introduction"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#methods-1"><i class="fa fa-check"></i><b>5.2</b> Methods</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#data-sources"><i class="fa fa-check"></i><b>5.2.1</b> Data Sources</a></li>
<li class="chapter" data-level="5.2.2" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#model-design"><i class="fa fa-check"></i><b>5.2.2</b> Model Design</a></li>
<li class="chapter" data-level="5.2.3" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#validation"><i class="fa fa-check"></i><b>5.2.3</b> Validation</a></li>
<li class="chapter" data-level="5.2.4" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#example"><i class="fa fa-check"></i><b>5.2.4</b> Example</a></li>
<li class="chapter" data-level="5.2.5" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#calculator"><i class="fa fa-check"></i><b>5.2.5</b> Calculator</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#results-1"><i class="fa fa-check"></i><b>5.3</b> Results</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#data-sources-1"><i class="fa fa-check"></i><b>5.3.1</b> Data Sources</a></li>
<li class="chapter" data-level="5.3.2" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#development"><i class="fa fa-check"></i><b>5.3.2</b> Development</a></li>
<li class="chapter" data-level="5.3.3" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#validation-1"><i class="fa fa-check"></i><b>5.3.3</b> Validation</a></li>
<li class="chapter" data-level="5.3.4" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#example-1"><i class="fa fa-check"></i><b>5.3.4</b> Example</a></li>
<li class="chapter" data-level="5.3.5" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#calculator-1"><i class="fa fa-check"></i><b>5.3.5</b> Calculator</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#discussion"><i class="fa fa-check"></i><b>5.4</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="chap-conclusion.html"><a href="chap-conclusion.html"><i class="fa fa-check"></i><b>6</b> Conclusion</a></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="chapter" data-level="A" data-path="chap-Conf-CR-supp.html"><a href="chap-Conf-CR-supp.html"><i class="fa fa-check"></i><b>A</b> How unmeasured confounding in a competing risks setting can affect treatment effect estimates in observational studies - Supplementary Material</a>
<ul>
<li class="chapter" data-level="A.1" data-path="chap-Conf-CR-supp.html"><a href="chap-Conf-CR-supp.html#simulation-details"><i class="fa fa-check"></i><b>A.1</b> Simulation Details</a></li>
<li class="chapter" data-level="A.2" data-path="chap-Conf-CR-supp.html"><a href="chap-Conf-CR-supp.html#mathematics-of-subdistribution-hazards"><i class="fa fa-check"></i><b>A.2</b> Mathematics of Subdistribution Hazards</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="chap-IPCW-logistic-supp.html"><a href="chap-IPCW-logistic-supp.html"><i class="fa fa-check"></i><b>B</b> Inverse Probability Weighting Adjustment of the Logistic Regression Calibration-in-the-Large - Supplementary Material</a>
<ul>
<li class="chapter" data-level="B.1" data-path="chap-IPCW-logistic-supp.html"><a href="chap-IPCW-logistic-supp.html#calibration-slope"><i class="fa fa-check"></i><b>B.1</b> Calibration Slope</a>
<ul>
<li class="chapter" data-level="B.1.1" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#results"><i class="fa fa-check"></i><b>B.1.1</b> Results</a></li>
<li class="chapter" data-level="B.1.2" data-path="chap-Conf-CR.html"><a href="chap-Conf-CR.html#discussion"><i class="fa fa-check"></i><b>B.1.2</b> Discussion</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="C" data-path="chap-dev-paper-supp.html"><a href="chap-dev-paper-supp.html"><i class="fa fa-check"></i><b>C</b> Development and External Validation of a Multi-State Clinical Prediction Model for Chronic Kidney Disease Patients Progressing onto Renal Replacement Therapy and Death - Supplementary Material</a>
<ul>
<li class="chapter" data-level="C.1" data-path="chap-dev-paper-supp.html"><a href="chap-dev-paper-supp.html#statistical-analysis"><i class="fa fa-check"></i><b>C.1</b> Statistical Analysis</a>
<ul>
<li class="chapter" data-level="C.1.1" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#development"><i class="fa fa-check"></i><b>C.1.1</b> Development</a></li>
<li class="chapter" data-level="C.1.2" data-path="chap-dev-paper.html"><a href="chap-dev-paper.html#validation"><i class="fa fa-check"></i><b>C.1.2</b> Validation</a></li>
</ul></li>
<li class="chapter" data-level="C.2" data-path="chap-dev-paper-supp.html"><a href="chap-dev-paper-supp.html#model-results"><i class="fa fa-check"></i><b>C.2</b> Model Results</a>
<ul>
<li class="chapter" data-level="C.2.1" data-path="chap-dev-paper-supp.html"><a href="chap-dev-paper-supp.html#two-state-model"><i class="fa fa-check"></i><b>C.2.1</b> Two State Model</a></li>
<li class="chapter" data-level="C.2.2" data-path="chap-dev-paper-supp.html"><a href="chap-dev-paper-supp.html#three-state-model"><i class="fa fa-check"></i><b>C.2.2</b> Three State Model</a></li>
<li class="chapter" data-level="C.2.3" data-path="chap-dev-paper-supp.html"><a href="chap-dev-paper-supp.html#five-state-model"><i class="fa fa-check"></i><b>C.2.3</b> Five State Model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Multi-State Clinical Prediction Models in Renal Replacement Therapy</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chap-IPCW-logistic" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Using Inverse-Probability-of-Censoring-Weights to Estimate Calibration-in-the-Large for Time-to-Event Models</h1>
<p><em>MA Barrowman, A Pate, GP Martin, CJM Sammut-Powell, M Sperrin</em></p>
Last updated: 12 Sep
<div id="abstract" class="section level2 unnumbered" number="">
<h2>Abstract</h2>
<div id="introduction" class="section level3 unnumbered" number="">
<h3>Introduction</h3>
<p>A key component of the development of a prediction model/algorithm is the assessment of its calibration through means of validation (internal and external). For time-to-event models, this assessment is complicated in three ways:</p>
<ul>
<li>Calibration can be assessed at multiple time points,</li>
<li>When Cox Modeling has been used, there exists no “intercept” for a model to be assessed on</li>
<li>Censoring occurs within the data, and this may or may not be correlated with the event-of-interest</li>
</ul>
<p>We choose to focus on analysing methods of overcoming the third of these problems using Inverse Probability of Censoring Weighting (IPCW), which can also combat the other two problems.</p>
</div>
<div id="methods" class="section level3 unnumbered" number="">
<h3>Methods</h3>
<p>We used simulations to generate time-to-event data with censoring, where censoring can be correlated or not with the event-of-interest. We then applied a pre-calibrated prediction models (including flawed ones) to the data and assessed the calibrations of these models under different methods:</p>
<ul>
<li>Kaplan-Meier Method (KM), the KM curve is used as a comparitor to the model predictions</li>
<li>Logistic Regression with IPCW Weighting (LW) and without it (LU)</li>
<li>Pseudo-Observations (PO), where the calibration is assessed using the pseuo-observation of the model data.</li>
</ul>
<p>These simulations were aggregating and analysed to compare Bias and Coverage of each of these methods.</p>
</div>
<div id="results" class="section level3 unnumbered" number="">
<h3>Results</h3>
<p>The LU and PO Methods had increasing absolute Bias over time, regardless of whether the model was perfectly calibrated or not. However, the LW Method consistently provided almost no Bias, and high coverage in all scenarios.</p>
</div>
<div id="discussion" class="section level3 unnumbered" number="">
<h3>Discussion</h3>
</div>
<div id="supplementary-material" class="section level3 unnumbered" number="">
<h3>Supplementary Material</h3>
<p>Supplementary Material is available in Appendix <a href="chap-dev-paper-supp.html#chap-dev-paper-supp">C</a>.</p>
</div>
</div>
<div id="introduction-1" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Introduction</h2>
<p>Clinical prediction models (CPMs) are statistical models/algorithms that aim to predict the presence (diagnostic) or furture occurence (prognostic) of an event of interest, conditional on a set of predictor variables. Before they be implemented in practice, CPMs must be robustly validated. They need to be validated before they are used and a fundamental test of their validity is calibration: the agreement between observed and predicted outcomes. This requires that among individuals with <span class="math inline">\(p\%\)</span> risk of an event, <span class="math inline">\(p\%\)</span> of those have the event across the full risk range <span class="citation">[<a href="#ref-steyerberg_clinical_2008" role="doc-biblioref">56</a>]</span>. The simplest assessment of calibration is the calibration-in-the-large, which tests for agreement in mean calibration (the weakest form of calibration) <span class="citation">[<a href="#ref-calster_calibration_2016-1" role="doc-biblioref">57</a>]</span>. With continuous or binary outcomes, such a test is straight-forward: it can be translated to a test for a zero intercept in a regression model with an appropriately transformed linear predictor as an offset, and no other predictors. More complicated measurements of calibration can also be assessed to descibe how calibration changes across the risk range, such as calibration slope (see Appendix <a href="chap-IPCW-logistic-supp.html#chap-IPCW-logistic-supp">B</a>). Calibration alone is not enough to fully assess a model’s performance however and so we also need measures of discrimination (how well models discern between different patients), e.g the c-statistic and overall accuracy, e.g. the Brier Score.</p>
<p>In the case of time to event models, however, estimation of calibration is complicated in three ways. First, calibration can be computed at multiple time-points and one must decide which time-points to evaluate, and how to integrate over these time-points. The choice and combination of time-points determines what we mean by calibration; this is problem-specific and not the focus of this paper. Calibration can also be integrated over time using the martingale residuals <span class="citation">[<a href="#ref-crowson_assessing_2016" role="doc-biblioref">58</a>]</span>; however we focus on the case where calibration at a specific time point is of interest - e.g. as is common in clinical decision support. Second, <mark>when a Cox Model is used</mark> there exists no explicit intercept in the model because of the non-parametric baseline hazard function <span class="citation">[<a href="#ref-royston_external_2013" role="doc-biblioref">59</a>]</span>. The lack of intercept can be overcome provided sufficient information concerning the baseline survival curve is available (although this is rarely the case as seen in QRISK <span class="citation">[<a href="#ref-hippisley-cox_derivation_2007" role="doc-biblioref">29</a>]</span>, ASCVD <span class="citation">[<a href="#ref-goff_2013_2014" role="doc-biblioref">60</a>]</span> and ASSIGN <span class="citation">[<a href="#ref-de_la_iglesia_performance_2011" role="doc-biblioref">61</a>]</span>. Once this is established, estimated survival probabilities are available.</p>
<p>Third, censoring needs to be handled in an appropriate way and this is the core message of this paper. Censoring is commonly overcome by using Kaplan-Meier estimates <span class="citation">[<a href="#ref-hippisley-cox_derivation_2007" role="doc-biblioref">29</a>], [<a href="#ref-royston_external_2013" role="doc-biblioref">59</a>]</span>, but the censoring assumptions required for the Kaplan-Meier estimate are stronger than those required for the Cox model: the former requiring unconditional independence (random censoring), the latter requiring independence conditional on covariates only. This is a problem because when miscalibration is found using this approach, it is not clear whether this is genuine miscalibration or a consequence of the different censoring assumptions. Royston <span class="citation">[<a href="#ref-royston_tools_2014" role="doc-biblioref">62</a>], [<a href="#ref-royston_tools_2015" role="doc-biblioref">63</a>]</span> has proposed the comparison of KM curves within risk groups, which alleviates the strength of the independence assumption required for the censoring handling to be comparable between the Cox model and the KM curves (since the KM curves now only assume independent censoring within risk group). In these papers a fractional polynomial approach to estimating the baseline survival function (and thus being able to share it efficiently) is also provided. However, this does not allow calculations of the overall calibration of the model, which is of primary interest here.</p>
<p>QRISK used the overall KM approach in the 2007 paper <span class="citation">[<a href="#ref-hippisley-cox_derivation_2007" role="doc-biblioref">29</a>]</span> demonstrating adequate calibration (6.34% predicted vs 6.25% observed in women and 8.86% predicted vs 8.88% observed in men), but miscalibration in the QRISK3 update <span class="citation">[<a href="#ref-hippisley-cox_development_2017" role="doc-biblioref">2</a>]</span> (4.7% predicted v 5.8% observed in women and 6.4% predicted vs 7.5% observed in men ). This may be because, as follow-up extends, the dependence of censoring on the covariates increases (QRISK had 12 years follow-up, QRISK3 had 18).</p>
<p>Royston <span class="citation">[<a href="#ref-royston_tools_2014" role="doc-biblioref">62</a>]</span> also presented an alternative approach for calibration at external validation. He uses the approach of pseudo-observations, as described by Perme and Anderson <span class="citation">[<a href="#ref-perme_checking_2008" role="doc-biblioref">64</a>]</span> to overcome the censoring issue and produce observed probabilities at individual level; however, this assumes that censoring is independent of covariates.</p>
<p>A solution to this problem is to apply a weighting to uncensored patients based on their probability of being censored according to a model that accounts for covariates. The Inverse Probability of Censoring Weighting (IPCW) relaxes the assumption that patients who were censored are identical to those that remain at risk and replaces it with the assumption that they are exchangeable conditional on the measured covariates. The weighting inflates the patients who were similar to the censored population to account for those patients who are no longer available at a given time.</p>
<p>Gerds &amp; Schumacher <span class="citation">[<a href="#ref-gerds_consistent_2006" role="doc-biblioref">65</a>]</span> have thoroughly investigated the requirements and advantages of applying an IPCW to a performance measure for modelling using the Brier score as an example and demonstrating the efficacy of its use, which was augmented by Spitoni et al <span class="citation">[<a href="#ref-spitoni_prediction_2018" role="doc-biblioref">66</a>]</span> who demonstrated that any proper scoring rule can be improved by the use of the IPCW. This work has been extended by Han et al <span class="citation">[<a href="#ref-han_comparing_2017" role="doc-biblioref">67</a>]</span> and Liu et al <span class="citation">[<a href="#ref-liu_comparing_2016" role="doc-biblioref">68</a>]</span> who demonstrated one can also apply IPCW to the c-statistic (a measure of discrimination).</p>
<p>In this paper we present an approach to assessing the calibration intercept (calibration-in-the-large) and calibration slope in time-to-event models based on estimating the censoring distribution, and reweighting observations by the inverse of the censoring probability. We first show, theoretically, how this method can be used and evidence that the metrics for calibration are amenable to its use. We then compare simulation results from using this weighted estimate to an unweighted estimate within various commonly used methods of calibration assessment.</p>
</div>
<div id="methods-1" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Methods</h2>
<div id="aims" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Aims</h3>
<p>The aim of this simulation study is to investigate the bias induced by applying different methods of assessing model calibration to data that is susceptible to censoring and to compare it to the bias when this data has been adjusted by the Inverse Probability of Censoring Weighting (IPCW).</p>
</div>
<div id="data-generating-method" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Data Generating Method</h3>
<p>We simulated populations of patients with survival and censoring times, and took the observed event time as the minimum of these two values along with an event indicator of whether this was the survival or censoring time <span class="citation">[<a href="#ref-burton_design_2006" role="doc-biblioref">69</a>]</span>. Each population was simulated with three parameters: <span class="math inline">\(\beta\)</span>, <span class="math inline">\(\gamma\)</span> and <span class="math inline">\(\eta\)</span>, which defined the proportional hazards coefficients for the survival and censoring distributions and the baseline hazard function, respectively.</p>
<p>Patients were generated with a single covariate <span class="math inline">\(Z \sim N(0,1)\)</span> from which, we then generated a survival time, <span class="math inline">\(T\)</span> and a censoring time, <span class="math inline">\(C\)</span>. Survival times were simulated with a baseline hazard <span class="math inline">\(\lambda_0(t) = t^{\eta}\)</span> (i.e. Weibull), and a proportional hazard of <span class="math inline">\(e^{\beta Z}\)</span>. This allows the simulation of a constant baseline hazard (<span class="math inline">\(\eta = 0\)</span>) as well as an increasing (<span class="math inline">\(\eta = \;^{1}/_{2}\)</span>) and decreasing (<span class="math inline">\(\eta = -\;^{1}/_{2}\)</span>) hazard function Censoring times were simulated with a constant baseline hazard, <span class="math inline">\(\lambda_{C,0}(t) = 1\)</span> and a proportional hazard of <span class="math inline">\(e^{\gamma Z}\)</span>. Therefore, the hazard functions can be expressed in full as:
<span class="math display">\[
\lambda(t) = e^{\beta Z}t^{\eta}\qquad\qquad\lambda_C(t)=e^{\gamma Z}
\]</span></p>
<p>This combines to give a simulated survival function, <span class="math inline">\(S\)</span> as
<span class="math display">\[
S(t|Z=z) = \exp\left(-\frac{e^{\beta Z}t^{\eta+1}}{\eta+1}\right)
\]</span>
and a simulated censoring function, <span class="math inline">\(S_c\)</span> as
<span class="math display">\[
S_c(t|Z=z) = \exp\left(-e^{\gamma Z}t\right)
\]</span>
Once the survival and censoring times were generated, the event time, <span class="math inline">\(X = \min(T,C)\)</span>, and the event indicator, <span class="math inline">\(\delta = I(T=X)\)</span>, were generated. In practice, only <span class="math inline">\(Z\)</span>, <span class="math inline">\(X\)</span> and <span class="math inline">\(\delta\)</span> would be observed.</p>
<p>During each simulation, we varied the parameters to take all the values,<span class="math inline">\(\gamma = \{-2,-1.5,-1,-0.5,0,0.5,1,1.5,2\}\)</span>, <span class="math inline">\(\beta = \{-2,-1.5,-1,-0.5,0,0.5,1,1.5,2\}\)</span> and <span class="math inline">\(\eta = \{-\;^{1}/_{2},0,\;^{1}/_{2}\}\)</span>. For each combination of parameters, we generated <span class="math inline">\(N = 100\)</span> populations of <span class="math inline">\(n = 10,000\)</span> patients (a high number of patients was chosen to improve precision of our estimates)</p>
</div>
<div id="prediction-models" class="section level3" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Prediction Models</h3>
<p>For each population, we used three distinct prediction models for survival. <span class="math inline">\(F_P\)</span> was chosen to exactly model the Data Generating Mechanism (DGM) to emulate a perfectly specified model:</p>
<p><span class="math display">\[
F_P(t|Z = z) = 1 - \exp\left(-\frac{e^{\beta Z}t^{\eta+1}}{\eta+1}\right)
\]</span></p>
<p>From this, we also derived a prediction model that would systematically over-estimate the prediction model, <span class="math inline">\(F_O\)</span>, and one which would systematically under-estimate the prediction, <span class="math inline">\(F_U\)</span>. These are defined as:</p>
<p><span class="math display">\[
F_U(t|Z=z) = \textrm{logit}^{-1}\left(\textrm{logit}\left( F_P(t|z) - 0.2\right)\right)
\]</span></p>
<p><span class="math display">\[
F_O(t|Z=z) = \textrm{logit}^{-1}\left(\textrm{logit}\left( F_P(t|z) + 0.2\right)\right)
\]</span></p>
<p>These prediction models were used to generate an estimate of the Expected probability that a given patient, with covariate <span class="math inline">\(z\)</span>, will have an event at the given time.</p>
</div>
<div id="the-ipcw" class="section level3" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> The IPCW</h3>
<p>In order to apply the IPCW, we need to calculate a censoring prediction model. For our purposes, we will again use a perfectly specified censoring distribution, <span class="math inline">\(G\)</span>, to be derived directly from the DGM:</p>
<p><span class="math display">\[
G(t|Z=z) = 1-\exp\left(-e^{\gamma Z}t\right)
\]</span>
This is used to calculate an IPCW for all non-censored patients at the last time they were observed (<span class="math inline">\(t\)</span> for patients who have not had an event, and <span class="math inline">\(X_i\)</span> for patients who have had the event), This is defined as:</p>
<p><span class="math display">\[
\omega(t|z) = \frac{1}{1 - G(\min(t,X_i)|z)}
\]</span>
<mark>Due to the sensitive nature of this propensity weighting over time, the IPCW is capped at a value of 10 <span class="citation">[<a href="#ref-shu_methods_2017" role="doc-biblioref">70</a>]</span>, this capping should only effect around 2% of simulated patients.</mark></p>
</div>
<div id="calibration-measurements" class="section level3" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Calibration Measurements</h3>
<p>The prediction models were assessed at 100 time points, evenly distributed between the 25th and 75th percentile of observed event times, <span class="math inline">\(X\)</span>. At each of these time points, we compare Observed outcomes (<span class="math inline">\(O\)</span>) with the Expected outcomes (<span class="math inline">\(E\)</span>) of the prediction models based on four choices of methodology <span class="citation">[<a href="#ref-riley_prognosis_2019" role="doc-biblioref">6</a>], [<a href="#ref-hippisley-cox_derivation_2007" role="doc-biblioref">29</a>], [<a href="#ref-royston_tools_2014" role="doc-biblioref">62</a>], [<a href="#ref-royston_tools_2015" role="doc-biblioref">63</a>], [<a href="#ref-andersen_pseudo-observations_2010" role="doc-biblioref">71</a>]</span> to produce measures for the calibration-in-the-large</p>
<ul>
<li>Kaplan-Meier (KM) - A Kaplan-Meier estimate of survival is estimated from the data and the value of the KM curve at the current time is taken to be the average Observed number of events within the population. The measure is the ratio of the Observed to the mean Expected number of events.</li>
<li>Logistic Unweighted (LU) - Logistic regression is performed on the non-censored population to predict the binary Observed value using the <span class="math inline">\(\textrm{logit}(E)\)</span> value as an offset and the Intercept of the regression is the estimate of calibration-in-the-large.</li>
<li>Logistic Weighted (LW) - As above, but the logistic regression is performed using the IPCW as a weighting for each non-censored patient.</li>
<li>Pseudo-Observations (PO) - The contribution of each patient (including censored patients) to the overall Observed value is calculated by removing them from the population and aggregating the difference. Regression is performed with the complimentary log-log function as a link function and the log cumulative hazard as an offset with the Intercept representing the estimate of calibration-in-the-large.</li>
</ul>
<p><del>Some of these methods produce unusual results for the regressions. Firstly, the weights within the LW method cause the “number of events” being processed (i.e the sum of the weighted events) to be non-integer. This is a minor issue and can be dealt with by most software packages <span class="citation">[<a href="#ref-wildscop_biostatistics_2013" role="doc-biblioref">72</a>]</span>. Secondly, the PO method produces outcomes that are outside of the (0,1) range <span class="citation">[<a href="#ref-perme_checking_2008" role="doc-biblioref">64</a>]</span> required for the complimentary log-log function. To combat this, we re-scale the values produced to be with this range and perform the regression as normal. Finally,</del></p>
<p>The KM method is centred around 1 for well performing models, whereas the others are centered around 0, so we subtract 1 from the results of the KM method to bring results to the same scale.</p>
</div>
<div id="estimands" class="section level3" number="3.2.6">
<h3><span class="header-section-number">3.2.6</span> Estimands</h3>
<p>For each set of parameters and methodology, our estimand at time, <span class="math inline">\(t\)</span>, measured in simulation <span class="math inline">\(i = 1,...,N\)</span> is <span class="math inline">\(\theta_i(t)\)</span>, the set of estimates of the calibration-in-the-large for the <span class="math inline">\(F_P\)</span>, <span class="math inline">\(F_U\)</span> and <span class="math inline">\(F_O\)</span> models in order. Therefore our underlying truth for all time points is</p>
<p><span class="math display">\[
\begin{array}{c}
\theta = \left(0,0.2,-0.2\right)
\end{array}
\]</span></p>
<p>From this, we can also define our upper and lower bound for a 95% confidence interval as the vectors <span class="math inline">\(\theta_{i,L}(t)\)</span> and <span class="math inline">\(\theta_{i,U}(t)\)</span>.</p>
</div>
<div id="performance-measures" class="section level3" number="3.2.7">
<h3><span class="header-section-number">3.2.7</span> Performance Measures</h3>
<p><del>The measures we will take as performance measures as the Bias, the Empirical Standard Error, the Median-Bias and the Coverage at time, <span class="math inline">\(t\)</span>, along with relevant standard errors and/or confidence intervals <span class="citation">[<a href="#ref-morris_using_2019" role="doc-biblioref">73</a>]</span>. For most measures, the standard error is easily calculable, but for the Median, it is more appropriate to calculate the confidence interval directly from the sorted values, <span class="math inline">\(\theta_{(1)},\theta_{(2)},...,\theta_{(100)}\)</span>, where <span class="math inline">\(\theta_{(50)}\)</span> is the median, the 95% confidence interval is the interval <span class="math inline">\(\left(\theta_{(40)}, \theta_{(61)}\right)\)</span>. To turn this into a Median-Bias, we subtract the true value, <span class="math inline">\(\theta\)</span>. These measures can be seen in table <a href="chap-IPCW-logistic.html#tab:PM-DGM-time">3.1</a>. For the Bias and EmpSE estimates at each time point, Method and Model, the top and bottom 5% of all simulation estimates will be omitted, leaving <span class="math inline">\(N=90\)</span> to avoid biasing the results from large outlier effects. We will also perform a Shapiro-Wilk test for each of the combination of parameters.</del></p>
<p>The measures we will take as performance measures are the Bias, the Empirical Standard Error (EmpSE) and the Coverage (Cov). We will also estimate the MCMC Standard Error of each of these estimates in order to calculate a 95% confidence interval</p>
<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; ">
<table class="table table-striped" style="font-size: 9px; width: auto !important; margin-left: auto; margin-right: auto;">
<caption style="font-size: initial !important;">
<span id="tab:PM-DGM-time">Table 3.1: </span><font size="2">Performance Measures to be taken at each time point</font>
</caption>
<thead>
<tr>
<th style="text-align:left;">
Performance Measure
</th>
<th style="text-align:left;">
Estimation
</th>
<th style="text-align:left;">
SE
</th>
<th style="text-align:left;">
SE/CI
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Bias
</td>
<td style="text-align:left;">
<span class="math display">\[\hat{\theta}(t) = \frac{1}{N} \sum_{i=1}^N\theta_i(t) - \theta\]</span>
</td>
<td style="text-align:left;">
<span class="math inline">\(\hat{\theta}_{SE}(t) = \sqrt{\frac{1}{N(N-1)} \sum_{i=1}^N \left(\theta_i(t) - \hat{\theta}(t)\right)^2}\)</span>
</td>
<td style="text-align:left;">
<span class="math display">\[\hat{\theta}_{SE}(t) = \sqrt{\frac{1}{N(N-1)} \sum_{i=1}^N \left(\theta_i(t) - \hat{\theta}(t)\right)^2}\]</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
EmpSE
</td>
<td style="text-align:left;">
<span class="math display">\[\hat{E}(t) = \sqrt{\frac{1}{N-1}\sum_{i=1}^N\left(\theta_i(t) - \hat{\theta}(t)\right)^2}\]</span>
</td>
<td style="text-align:left;">
<span class="math inline">\(\hat{E}_{SE}(t)=\frac{\hat{E}(t)}{\sqrt{2(N-1)}}\)</span>
</td>
<td style="text-align:left;">
<span class="math display">\[\hat{E}_{SE}(t)=\frac{\hat{E}(t)}{\sqrt{2(N-1)}}\]</span>
</td>
</tr>
<tr>
<td style="text-align:left;">
Coverage
</td>
<td style="text-align:left;">
<span class="math display">\[\hat{C}(t)=\frac{1}{N}\sum_{i=1}^NI\left(\theta_{i,L}(t) \le \theta \le \theta_{i,U}(t)\right)\]</span>
</td>
<td style="text-align:left;">
<span class="math inline">\(\hat{C}_{SE}(t) = \frac{\hat{C}(t)\left(1-\hat{C}(t)\right)}{N}\)</span>
</td>
<td style="text-align:left;">
<span class="math display">\[\hat{C}_{SE}(t) = \frac{\hat{C}(t)\left(1-\hat{C}(t)\right)}{N}\]</span>
</td>
</tr>
</tbody>
</table>
</div>
<p>The bias <del>and median-bias</del> provide a measures of how close our estimate is to the true value as per our data generating mechanisms. The coverage will demonstrate how often our confidence intervals surrounding our estimate actually include this true value. The Empirical Standard Error will show us how precise our estimates are. <del>The shapiro-wilk result will allow us to determine whether the bias or median-bias is more appropriate overall when analysing our data.</del></p>
</div>
<div id="software" class="section level3" number="3.2.8">
<h3><span class="header-section-number">3.2.8</span> Software</h3>
<p>All analysis was done in <code>R 3.6.3</code> <span class="citation">[<a href="#ref-r_core_team_r_nodate" role="doc-biblioref">74</a>]</span> using the various <code>tidyverse</code> packages <span class="citation">[<a href="#ref-wickham_tidy_2017" role="doc-biblioref">75</a>]</span>, Kaplan-Meier estimates were found using the <code>survival</code> package <span class="citation">[<a href="#ref-therneau_package_2020" role="doc-biblioref">76</a>]</span>, Pseudo-Observations were optimised with the <code>Rcpp</code> package <span class="citation">[<a href="#ref-eddelbuettel_rcpp_2011" role="doc-biblioref">77</a>]</span> and influenced by the <code>pseudo</code> package <span class="citation">[<a href="#ref-perme_pseudo_2017" role="doc-biblioref">78</a>]</span>. The results app was developed using <code>shiny</code><span class="citation">[<a href="#ref-chang_shiny_2020" role="doc-biblioref">79</a>]</span>. The code used for this simulation study is available <a href="https://github.com/MyKo101/IPCW-Logistic">on Github</a> and the results can be seen <a href="https://michael-barrowman.shinyapps.io/IPCW_Calibrations/?_ga=2.129261196.1072091615.1588464259-38998367.1584541320">here</a></p>
</div>
</div>
<div id="results-1" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Results</h2>
<p>Here, we present a subset of results with the full set of outputs available in the Calculator App. The estimates are presented with time on the x-axis and the y-axis showing the performance measure, stratified by model across facets and method of analysis by colour. We will investigate the Bias, EmpSE and Coverage for the scenarios where <span class="math inline">\(\beta=1\)</span> and <span class="math inline">\(\eta=\;^{1}/_{2}\)</span> are fixed and <span class="math inline">\(\gamma\)</span> varies through -1, 0 and 1. These represent when the event and censoring are positively correlated (<span class="math inline">\(\gamma = \beta = 1\)</span>), negatively correlated (<span class="math inline">\(\gamma = - \beta = -1\)</span>) and when the covariate has no effect on the censoring distribution (<span class="math inline">\(\gamma=0\)</span>)</p>
<div id="no-correlation" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> No correlation</h3>
<p>When <span class="math inline">\(\gamma = 0\)</span>, we can see in figure <a href="chap-IPCW-logistic.html#fig:BiasPlotg0">3.1</a> that the Bias is moving away from 0 for both the LU and PO, in opposing directions over time. These time-based biases are consistent across models indicating that this is due to the censoring of the population and not the underlying model. The KM measure is biased downwards for the Over-Predicting model and upwards for the Under-Predicting model, however it is relatively unbiased when a model is defined perfectly. The LW Method consistently provides an unbiased measurement of the model calibration regardless of the underlying accuracy of the model.</p>
<div class="figure"><span id="fig:BiasPlotg0"></span>
<img src="figure/IPCW_Logistic/No%20Slope/Plot_b(1)_g(0)_e(0.5)_M(Bias).png" alt="Bias for Over-estimating, Perfect and Under-Estimating models across all four methods when $\beta = 1$, $\gamma = 0$ and $\eta = \sfrac{1}{2}$. 95% Confidence Intervals are included in the plot." width="1200" />
<p class="caption">
Figure 3.1: Bias for Over-estimating, Perfect and Under-Estimating models across all four methods when <span class="math inline">\(\beta = 1\)</span>, <span class="math inline">\(\gamma = 0\)</span> and <span class="math inline">\(\eta = \;^{1}/_{2}\)</span>. 95% Confidence Intervals are included in the plot.
</p>
</div>
<p>The small confidence intervals surrounding the Bias estimates above demonstrate that these results are consistent, which is exemplified by the small values found in figure <a href="chap-IPCW-logistic.html#fig:EmpSEPlotg0">3.2</a>, with the KM Method providing consistent (if biased) results.</p>
<div class="figure"><span id="fig:EmpSEPlotg0"></span>
<img src="figure/IPCW_Logistic/No%20Slope/Plot_b(1)_g(0)_e(0.5)_M(EmpSE).png" alt="EmpSE for Over-estimating, Perfect and Under-Estimating models across all four methods when $\beta = 1$, $\gamma = 0$ and $\eta = \sfrac{1}{2}$. 95% Confidence Intervals are included in the plot." width="1200" />
<p class="caption">
Figure 3.2: EmpSE for Over-estimating, Perfect and Under-Estimating models across all four methods when <span class="math inline">\(\beta = 1\)</span>, <span class="math inline">\(\gamma = 0\)</span> and <span class="math inline">\(\eta = \;^{1}/_{2}\)</span>. 95% Confidence Intervals are included in the plot.
</p>
</div>
<p>The large biases above, also lead to inaccurate estimations at the simulation level with very low coverage of the true value, as demonstrated in figure <a href="chap-IPCW-logistic.html#fig:CoveragePlotg0">3.3</a>. The LW Method once again is extremely close to the expected coverage of 95%.</p>
<div class="figure"><span id="fig:CoveragePlotg0"></span>
<img src="figure/IPCW_Logistic/No%20Slope/Plot_b(1)_g(0)_e(0.5)_M(Coverage).png" alt="Coverage for Over-estimating, Perfect and Under-Estimating models across all four methods when $\beta = 1$, $\gamma = 0$ and $\eta = \sfrac{1}{2}$. 95% Confidence Intervals are included in the plot." width="1200" />
<p class="caption">
Figure 3.3: Coverage for Over-estimating, Perfect and Under-Estimating models across all four methods when <span class="math inline">\(\beta = 1\)</span>, <span class="math inline">\(\gamma = 0\)</span> and <span class="math inline">\(\eta = \;^{1}/_{2}\)</span>. 95% Confidence Intervals are included in the plot.
</p>
</div>
</div>
<div id="positive-correlation" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Positive correlation</h3>
<p>When <span class="math inline">\(\gamma = 1\)</span>, we can in figure <a href="chap-IPCW-logistic.html#fig:BiasPlotg1">3.4</a> see that the Biases for PO and LU, are once again become more innacurate over time, whereas the LW Method is consistently unbiased.</p>
<div class="figure"><span id="fig:BiasPlotg1"></span>
<img src="figure/IPCW_Logistic/No%20Slope/Plot_b(1)_g(1)_e(0.5)_M(Bias).png" alt="Bias for Over-estimating, Perfect and Under-Estimating models across all four methods when $\beta = 1$, $\gamma = 1$ and $\eta = \sfrac{1}{2}$. 95% Confidence Intervals are included in the plot." width="1200" />
<p class="caption">
Figure 3.4: Bias for Over-estimating, Perfect and Under-Estimating models across all four methods when <span class="math inline">\(\beta = 1\)</span>, <span class="math inline">\(\gamma = 1\)</span> and <span class="math inline">\(\eta = \;^{1}/_{2}\)</span>. 95% Confidence Intervals are included in the plot.
</p>
</div>
<div class="figure"><span id="fig:EmpSEPlotg1"></span>
<img src="figure/IPCW_Logistic/No%20Slope/Plot_b(1)_g(1)_e(0.5)_M(EmpSE).png" alt="EmpSE for Over-estimating, Perfect and Under-Estimating models across all four methods when $\beta = 1$, $\gamma = 1$ and $\eta = \sfrac{1}{2}$. 95% Confidence Intervals are included in the plot." width="1200" />
<p class="caption">
Figure 3.5: EmpSE for Over-estimating, Perfect and Under-Estimating models across all four methods when <span class="math inline">\(\beta = 1\)</span>, <span class="math inline">\(\gamma = 1\)</span> and <span class="math inline">\(\eta = \;^{1}/_{2}\)</span>. 95% Confidence Intervals are included in the plot.
</p>
</div>
<p>However, there is an reduced level of coverage, even for the LW Method as shown shown in figure <a href="chap-IPCW-logistic.html#fig:CoveragePlotg1">3.6</a>.</p>
<div class="figure"><span id="fig:CoveragePlotg1"></span>
<img src="figure/IPCW_Logistic/No%20Slope/Plot_b(1)_g(1)_e(0.5)_M(Coverage).png" alt="Coverage for Over-estimating, Perfect and Under-Estimating models across all four methods when $\beta = 1$, $\gamma = 1$ and $\eta = \sfrac{1}{2}$. 95% Confidence Intervals are included in the plot." width="1200" />
<p class="caption">
Figure 3.6: Coverage for Over-estimating, Perfect and Under-Estimating models across all four methods when <span class="math inline">\(\beta = 1\)</span>, <span class="math inline">\(\gamma = 1\)</span> and <span class="math inline">\(\eta = \;^{1}/_{2}\)</span>. 95% Confidence Intervals are included in the plot.
</p>
</div>
</div>
<div id="negative-correlation" class="section level3" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Negative correlation</h3>
<p>When <span class="math inline">\(\gamma = -1\)</span>, we see can in figures <a href="chap-IPCW-logistic.html#fig:BiasPlotgn1">3.7</a> and <a href="chap-IPCW-logistic.html#fig:EmpSEPlotgn1">3.8</a>, the similar results to the above figures, with the LU and PO biases becoming more pronounced over time, and LW remainining consistently low.</p>
<div class="figure"><span id="fig:BiasPlotgn1"></span>
<img src="figure/IPCW_Logistic/No%20Slope/Plot_b(1)_g(-1)_e(0.5)_M(Bias).png" alt="Bias for Over-estimating, Perfect and Under-Estimating models across all four methods when $\beta = 1$, $\gamma = 1$ and $\eta = \sfrac{1}{2}$. 95% Confidence Intervals are included in the plot." width="1200" />
<p class="caption">
Figure 3.7: Bias for Over-estimating, Perfect and Under-Estimating models across all four methods when <span class="math inline">\(\beta = 1\)</span>, <span class="math inline">\(\gamma = 1\)</span> and <span class="math inline">\(\eta = \;^{1}/_{2}\)</span>. 95% Confidence Intervals are included in the plot.
</p>
</div>
<div class="figure"><span id="fig:EmpSEPlotgn1"></span>
<img src="figure/IPCW_Logistic/No%20Slope/Plot_b(1)_g(-1)_e(0.5)_M(EmpSE).png" alt="EmpSE for Over-estimating, Perfect and Under-Estimating models across all four methods when $\beta = 1$, $\gamma = 1$ and $\eta = \sfrac{1}{2}$. 95% Confidence Intervals are included in the plot." width="1200" />
<p class="caption">
Figure 3.8: EmpSE for Over-estimating, Perfect and Under-Estimating models across all four methods when <span class="math inline">\(\beta = 1\)</span>, <span class="math inline">\(\gamma = 1\)</span> and <span class="math inline">\(\eta = \;^{1}/_{2}\)</span>. 95% Confidence Intervals are included in the plot.
</p>
</div>
<p>The data shown in figure <a href="chap-IPCW-logistic.html#fig:CoveragePlotgn1">3.9</a> demonstrates that the LW Method is achieving higher Coverage than when there is a positive correlation between the event-of-interest and the censoring rate, however the intervals are still under-performing.</p>
<div class="figure"><span id="fig:CoveragePlotgn1"></span>
<img src="figure/IPCW_Logistic/No%20Slope/Plot_b(1)_g(-1)_e(0.5)_M(Coverage).png" alt="Coverage for Over-estimating, Perfect and Under-Estimating models across all four methods when $\beta = 1$, $\gamma = 1$ and $\eta = \sfrac{1}{2}$. 95% Confidence Intervals are included in the plot." width="1200" />
<p class="caption">
Figure 3.9: Coverage for Over-estimating, Perfect and Under-Estimating models across all four methods when <span class="math inline">\(\beta = 1\)</span>, <span class="math inline">\(\gamma = 1\)</span> and <span class="math inline">\(\eta = \;^{1}/_{2}\)</span>. 95% Confidence Intervals are included in the plot.
</p>
</div>
</div>
</div>
<div id="discussion-1" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Discussion</h2>
<p><strong>To Be Done</strong></p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-hippisley-cox_development_2017">
<p>[2] J. Hippisley-Cox, C. Coupland, and P. Brindle, “Development and validation of QRISK3 risk prediction algorithms to estimate future risk of cardiovascular disease: Prospective cohort study,” <em>BMJ</em>, vol. 357, May 2017, doi: <a href="https://doi.org/10.1136/bmj.j2099">10.1136/bmj.j2099</a>.</p>
</div>
<div id="ref-riley_prognosis_2019">
<p>[6] R. D. Riley, D. van der Windt, P. Croft, and K. G. M. Moons, <em>Prognosis Research in Healthcare: Concepts, Methods, and Impact</em>, First. Oxford University Press, 2019.</p>
</div>
<div id="ref-hippisley-cox_derivation_2007">
<p>[29] J. Hippisley-Cox, C. Coupland, Y. Vinogradova, J. Robson, M. May, and P. Brindle, “Derivation and validation of QRISK, a new cardiovascular disease risk score for the United Kingdom: Prospective open cohort study,” <em>BMJ (Clinical research ed.)</em>, vol. 335, no. 7611, p. 136, Jul. 2007, doi: <a href="https://doi.org/10.1136/bmj.39261.471806.55">10.1136/bmj.39261.471806.55</a>.</p>
</div>
<div id="ref-steyerberg_clinical_2008">
<p>[56] E. W. Steyerberg, <em>Clinical Prediction Models: A Practical Approach to Development, Validation, and Updating</em>. Springer Science &amp; Business Media, 2008.</p>
</div>
<div id="ref-calster_calibration_2016-1">
<p>[57] B. V. Calster, D. Nieboer, Y. Vergouwe, B. D. Cock, M. J. Pencina, and E. W. Steyerberg, “A calibration hierarchy for risk models was defined: From utopia to empirical data,” <em>Journal of Clinical Epidemiology</em>, vol. 74, pp. 167–176, Jun. 2016, doi: <a href="https://doi.org/10.1016/j.jclinepi.2015.12.005">10.1016/j.jclinepi.2015.12.005</a>.</p>
</div>
<div id="ref-crowson_assessing_2016">
<p>[58] C. S. Crowson, E. J. Atkinson, and T. M. Therneau, “Assessing Calibration of Prognostic Risk Scores,” <em>Statistical methods in medical research</em>, vol. 25, no. 4, pp. 1692–1706, Aug. 2016, doi: <a href="https://doi.org/10.1177/0962280213497434">10.1177/0962280213497434</a>.</p>
</div>
<div id="ref-royston_external_2013">
<p>[59] P. Royston and D. G. Altman, “External validation of a Cox prognostic model: Principles and methods,” <em>BMC Medical Research Methodology</em>, vol. 13, no. 1, p. 33, Mar. 2013, doi: <a href="https://doi.org/10.1186/1471-2288-13-33">10.1186/1471-2288-13-33</a>.</p>
</div>
<div id="ref-goff_2013_2014">
<p>[60] D. C. Goff <em>et al.</em>, “2013 ACC/AHA Guideline on the Assessment of Cardiovascular Risk: A Report of the American College of Cardiology/American Heart Association Task Force on Practice Guidelines,” <em>Circulation</em>, vol. 129, no. 25 suppl 2, pp. S49–S73, Jun. 2014, doi: <a href="https://doi.org/10.1161/01.cir.0000437741.48606.98">10.1161/01.cir.0000437741.48606.98</a>.</p>
</div>
<div id="ref-de_la_iglesia_performance_2011">
<p>[61] B. de la Iglesia, J. F. Potter, N. R. Poulter, M. M. Robins, and J. Skinner, “Performance of the ASSIGN cardiovascular disease risk score on a UK cohort of patients from general practice,” <em>Heart</em>, vol. 97, no. 6, pp. 491–499, Mar. 2011, doi: <a href="https://doi.org/10.1136/hrt.2010.203364">10.1136/hrt.2010.203364</a>.</p>
</div>
<div id="ref-royston_tools_2014">
<p>[62] P. Royston, “Tools for Checking Calibration of a Cox Model in External Validation: Approach Based on Individual Event Probabilities:” <em>The Stata Journal</em>, Dec. 2014, doi: <a href="https://doi.org/10.1177/1536867X1401400403">10.1177/1536867X1401400403</a>.</p>
</div>
<div id="ref-royston_tools_2015">
<p>[63] P. Royston, “Tools for Checking Calibration of a Cox Model in External Validation: Prediction of Population-Averaged Survival Curves Based on Risk Groups,” <em>The Stata Journal</em>, vol. 15, no. 1, pp. 275–291, Apr. 2015, doi: <a href="https://doi.org/10.1177/1536867X1501500116">10.1177/1536867X1501500116</a>.</p>
</div>
<div id="ref-perme_checking_2008">
<p>[64] M. P. Perme and P. K. Andersen, “Checking hazard regression models using pseudo-observations,” <em>Statistics in medicine</em>, vol. 27, no. 25, pp. 5309–5328, Nov. 2008, doi: <a href="https://doi.org/10.1002/sim.3401">10.1002/sim.3401</a>.</p>
</div>
<div id="ref-gerds_consistent_2006">
<p>[65] T. A. Gerds and M. Schumacher, “Consistent Estimation of the Expected Brier Score in General Survival Models with Right-Censored Event Times,” <em>Biometrical Journal</em>, vol. 48, no. 6, pp. 1029–1040, 2006, doi: <a href="https://doi.org/10.1002/bimj.200610301">10.1002/bimj.200610301</a>.</p>
</div>
<div id="ref-spitoni_prediction_2018">
<p>[66] C. Spitoni, V. Lammens, and H. Putter, “Prediction errors for state occupation and transition probabilities in multi-state models,” <em>Biometrical Journal. Biometrische Zeitschrift</em>, vol. 60, no. 1, pp. 34–48, Jan. 2018, doi: <a href="https://doi.org/10.1002/bimj.201600191">10.1002/bimj.201600191</a>.</p>
</div>
<div id="ref-han_comparing_2017">
<p>[67] X. Han, Y. Zhang, and Y. Shao, “On comparing two correlated C indices with censored survival data,” <em>Statistics in medicine</em>, vol. 36, no. 25, pp. 4041–4049, Nov. 2017, doi: <a href="https://doi.org/10.1002/sim.7414">10.1002/sim.7414</a>.</p>
</div>
<div id="ref-liu_comparing_2016">
<p>[68] X. Liu, Z. Jin, and J. H. Graziano, “Comparing paired biomarkers in predicting quantitative health outcome subject to random censoring,” <em>Statistical methods in medical research</em>, vol. 25, no. 1, pp. 447–457, Feb. 2016, doi: <a href="https://doi.org/10.1177/0962280212460434">10.1177/0962280212460434</a>.</p>
</div>
<div id="ref-burton_design_2006">
<p>[69] A. Burton, D. G. Altman, P. Royston, and R. L. Holder, “The design of simulation studies in medical statistics,” <em>Statistics in Medicine</em>, vol. 25, no. 24, pp. 4279–4292, Dec. 2006, doi: <a href="https://doi.org/10.1002/sim.2673">10.1002/sim.2673</a>.</p>
</div>
<div id="ref-shu_methods_2017">
<p>[70] X. Shu and D. E. Schaubel, “Methods for Contrasting Gap Time Hazard Functions: Application to Repeat Liver Transplantation,” <em>Statistics in biosciences</em>, vol. 9, no. 2, pp. 470–488, Dec. 2017, doi: <a href="https://doi.org/10.1007/s12561-016-9168-6">10.1007/s12561-016-9168-6</a>.</p>
</div>
<div id="ref-andersen_pseudo-observations_2010">
<p>[71] P. K. Andersen and M. Pohar Perme, “Pseudo-observations in survival analysis,” <em>Statistical Methods in Medical Research</em>, vol. 19, no. 1, pp. 71–99, Feb. 2010, doi: <a href="https://doi.org/10.1177/0962280209105020">10.1177/0962280209105020</a>.</p>
</div>
<div id="ref-wildscop_biostatistics_2013">
<p>[72] Wildscop, “Biostatistics and epidemiology with R: Weighted Logistic Regression in R, SPSS, Stata,” <em>biostatistics and epidemiology with R</em>. Feb-2013.</p>
</div>
<div id="ref-morris_using_2019">
<p>[73] T. P. Morris, I. R. White, and M. J. Crowther, “Using simulation studies to evaluate statistical methods,” <em>Statistics in Medicine</em>, vol. 38, no. 11, pp. 2074–2102, 2019, doi: <a href="https://doi.org/10.1002/sim.8086">10.1002/sim.8086</a>.</p>
</div>
<div id="ref-r_core_team_r_nodate">
<p>[74] R. C. Team, “R: A Language and Environment for Statistical Computing.” R Foundation for Statistical Computing, Vienna, Austria, Vienna,</p>
</div>
<div id="ref-wickham_tidy_2017">
<p>[75] H. Wickham, “The tidy tools manifesto.” https://cran.r-project.org/web/packages/tidyverse/vignettes/manifesto.html, Nov-2017.</p>
</div>
<div id="ref-therneau_package_2020">
<p>[76] T. Therneau, “A package for survival analysis in R,” p. 89, Mar. 2020.</p>
</div>
<div id="ref-eddelbuettel_rcpp_2011">
<p>[77] D. Eddelbuettel and R. Francois, “Rcpp: Seamless R and C++ Integration,” <em>Journal of Statistical Software</em>, vol. 40, no. 1, pp. 1–18, Apr. 2011, doi: <a href="https://doi.org/10.18637/jss.v040.i08">10.18637/jss.v040.i08</a>.</p>
</div>
<div id="ref-perme_pseudo_2017">
<p>[78] M. P. Perme, M. Gerster, and K. Rodrigues, “Pseudo: Computes Pseudo-Observations for Modeling.” Jul-2017.</p>
</div>
<div id="ref-chang_shiny_2020">
<p>[79] W. Chang <em>et al.</em>, “Shiny: Web Application Framework for R.” Mar-2020.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="chap-Conf-CR.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chap-performance-metrics.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": [["thesis.pdf", "PDF"]],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
